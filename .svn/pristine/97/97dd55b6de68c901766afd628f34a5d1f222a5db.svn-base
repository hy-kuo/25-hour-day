// JavaScript Document

onload = function(){
	initUser();
}

var initUser = function(){
		//user to register
		var registerBtn = document.getElementById('register');
		registerBtn.onclick = function(){
				location.href = 'http://25-hour-day.appspot.com/register.html';
				//end of user to regiser
				}
				cheacklogin();

				// handle login
				var loginForm = document.getElementById('login-form'); 
				loginForm.onsubmit =  function(){
				var id = document.getElementById('id').value;
				var password = document.getElementById('password').value;
				
				
				ajaxRequest ('POST',encodeURI('login'), {'Content-Type': 'application/json;charset=UTF-8'}, 
				'{' + '"id": "' + id + '", "password" :"' + password +'"' + '}',
				function(status,headers, body){//success callback
					var loginbar = document.getElementById('login-bar');
					loginbar.innerHTML = ' Welcome!!!';
					
				},function(status,headers, body){//error callback
					alert('Id or password is wrong!');
					return;
				},null);
				return false;
				
				}
				//end of login
				
				//start logout
				
				
}
 
var cheacklogin = function(){
		ajaxRequest('GET', encodeURI('login'), {'Accept': 'application/json;'}, null
			, function(status, headers, body) { //success
				
				var logout = document.getElementById('logout');
					reomoveClass(logout, 'content-hidden');								
			}, function(status, headers, body) { //error
			
				var loginForm = document.getElementById('login-form');
				removeClass(loginForm,'content-hidden');
				
			}, null);

	
	}